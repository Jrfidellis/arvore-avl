var o=class{valor;esquerda;direita;constructor(e){this.valor=e,this.esquerda=null,this.direita=null}},n=class{constructor(e=r=>{}){this.visitar=e}raiz=null;nos=[];inserir(e){if(this.raiz===null){let r=new o(e);this.raiz=r,this.nos.push(r)}else this.inserirRecursivo(this.raiz,e)}inserirRecursivo(e,r){let a=new o(r);if(r<e.valor)e.esquerda===null?(e.esquerda=a,this.nos.push(a)):this.inserirRecursivo(e.esquerda,r);else if(r>e.valor)e.direita===null?(e.direita=a,this.nos.push(a)):this.inserirRecursivo(e.direita,r);else{globalThis.alert("Elemento j\xE1 existe na \xE1rvore");return}this.balancear(e)}balancear(e){let r=this.procurarPai(e.valor),a=this.calculaFatorDeBalanceamento(e),i=e;return a>1?(this.calculaFatorDeBalanceamento(e.esquerda)<0&&(e.esquerda=this.rotacaoEsquerda(e.esquerda)),i=this.rotacaoDireita(e)):a<-1&&(this.calculaFatorDeBalanceamento(e.direita)>0&&(e.direita=this.rotacaoDireita(e.direita)),i=this.rotacaoEsquerda(e)),r===null?this.raiz=i:r.esquerda===e?r.esquerda=i:r.direita=i,i}rotacaoDireita(e){let r=e.esquerda;if(!r)return e;let a=r.direita;return r.direita=e,e.esquerda=a,r}rotacaoEsquerda(e){let r=e.direita;if(!r)return e;let a=r.esquerda;return r.esquerda=e,e.direita=a,r}calculaFatorDeBalanceamento(e){let r=this.calculaAltura(e.esquerda),a=this.calculaAltura(e.direita);return r-a}calculaAltura(e,r=0){return e===null?r:Math.max(this.calculaAltura(e.esquerda,r+1),this.calculaAltura(e.direita,r+1))}pesquisar(e){let{no:r}=this.pesquisarComNo(this.raiz,e);return r}procurarPai(e){let{noAnterior:r}=this.pesquisarComNo(this.raiz,e);return r}pesquisarComNo(e,r){let a=null;for(;e!=null;){if(this.visitar(e),r==e.valor)return{no:e,noAnterior:a};r<e.valor?(a=e,e=e.esquerda):(a=e,e=e.direita)}return{no:null,noAnterior:null}}deletarPorCopia(e){let r=this.pesquisar(e);if(r==null){globalThis.alert("elemento n\xE3o est\xE1 na \xE1rvore");return}if(this.raiz==null){globalThis.alert("\xE1rvore est\xE1 vazia");return}if(r==this.raiz){let i;if(this.calculaFatorDeBalanceamento(r)>0){if(i=r.esquerda,!i)return;let d=i.direita;i.direita=this.raiz.direita;let l=i.direita;if(!l)return;for(;l.esquerda;)l=l.esquerda;l.esquerda=d}else{if(i=r.direita,!i)return;let d=i.esquerda;i.esquerda=this.raiz.esquerda;let l=i.esquerda;if(!l)return;for(;l.direita;)l=l.direita;l.direita=d}this.raiz=i;return}let a=this.procurarPai(e);if(!a)throw new Error("pai de "+e+" n\xE3o encontrado");if(r.direita==null)a.esquerda===r?a.esquerda=r.esquerda:a.direita=r.esquerda;else if(r.esquerda===null)a.esquerda===r?a.esquerda=r.direita:a.direita=r.direita;else{let i=r.esquerda;for(;i.direita!=null;)i=i.direita;this.deletarPorCopia(i.valor),r.valor=i.valor}}preordem(){let e=[];return this.preordemRecursivo(this.raiz,e),e}preordemRecursivo(e,r=[]){e!=null&&(r.push(e.valor),this.preordemRecursivo(e.esquerda,r),this.preordemRecursivo(e.direita,r))}emOrdem(){let e=[];return this.emOrdemRecursivo(this.raiz,e),e}emOrdemRecursivo(e,r=[]){e!=null&&(this.emOrdemRecursivo(e.esquerda,r),r.push(e.valor),this.emOrdemRecursivo(e.direita,r))}posOrdem(){let e=[];return this.posOrdemRecursivo(this.raiz,e),e}posOrdemRecursivo(e,r=[]){e!=null&&(this.posOrdemRecursivo(e.esquerda,r),this.posOrdemRecursivo(e.direita,r),r.push(e.valor))}};var c=[];function h(t){t!=null&&c.push(t)}function p(t){return new Promise(e=>{let r=document.getElementById(t.valor.toString());r?.style.setProperty("background-color","red"),setTimeout(()=>{r?.style.setProperty("background-color","#4caf50"),e(!0)},500)})}var s=new n(h);async function u(t=!1){let e=document.getElementById("main");if(e){e.innerHTML="";let r=document.createElement("ul");e.appendChild(r);let a=document.createElement("li");s.raiz?a.innerHTML=`<div id="${s.raiz?.valor}" class="no">${s.raiz?.valor}</div>`:a.innerHTML='<div class="no">\xC1rvore vazia</div>',r.appendChild(a),m(s.raiz,a)}if(t)for(let r of c)await p(r);c=[]}function m(t,e,r=0){if(t==null)return;let a=document.createElement("ul");if(e.appendChild(a),t.esquerda!=null){let i=document.createElement("li");i.innerHTML=`<div id="${t.esquerda?.valor}" class="no">${t.esquerda?.valor??""}</div>`,a.appendChild(i),m(t.esquerda,i,r+1)}else{let i=document.createElement("li");i.innerHTML="<span></span>",a.appendChild(i)}if(t.direita!=null){let i=document.createElement("li");i.innerHTML=`<div id="${t.direita?.valor}" class="no">${t.direita?.valor??""}</div>`,a.appendChild(i),m(t.direita,i,r+1)}else{let i=document.createElement("li");i.innerHTML="<span></span>",a.appendChild(i)}}globalThis.inserir=function(t){s.inserir(t),u()};globalThis.pesquisar=function(t){let e=s.pesquisar(t);if(!e){alert("Valor n\xE3o encontrado");return}alert("Fator de balanceamento do n\xF3 \xE9 "+s.calculaFatorDeBalanceamento(e)),u(!0)};globalThis.preOrdem=function(){globalThis.alert(s.preordem())};globalThis.posOrdem=function(){globalThis.alert(s.posOrdem())};globalThis.emOrdem=function(){globalThis.alert(s.emOrdem())};globalThis.deletarPorCopia=function(t){s.deletarPorCopia(t),u()};globalThis.limpar=function(){s=new n(h),u()};u();
